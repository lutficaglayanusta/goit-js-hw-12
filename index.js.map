{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\n// Stil importu\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst button = document.querySelector('.load-more');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport const renderImages = images => {\n  const markup = images\n    .map(\n      image => `<li class=\"gallery-item\">\n                  <a href=\"${image.largeImageURL}\">\n                    <img src=\"${image.webformatURL}\" width='360' height='200' alt=\"${image.tags}\">\n                  </a>\n                  \n                  <ul>\n                      <li><b>Likes</b> ${image.likes}</li>\n                      <li><b>Views</b> ${image.views}</li>\n                      <li><b>Comments</b> ${image.comments}</li>\n                      <li><b>Downloads</b> ${image.downloads}</li>\n                  </ul>\n                  \n                  \n              </li>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n};\n\nexport const clearGallery = () => {\n  gallery.innerHTML = '';\n}\nexport const showLoader = () => {\n  loader.style.display = 'block';\n};\nexport const hideLoader = () => {\n  loader.style.display = 'none';\n};\nexport const showButton = () => {\n  button.style.display = 'block';\n}\nexport const hideButton = () => {\n  button.style.display = 'none';\n};\n","import axios from 'axios';\n\nimport iziToast from 'izitoast';\n// Stil importu\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst api_key = '51088577-7b521529318281431558696f8';\n\n\n\nexport const fetchImages = async (input, page,per_page) => {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: api_key,\n        q: input,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: per_page,\n        page: page,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  }\n};\n","import iziToast from 'izitoast';\n// Stil importu\nimport 'izitoast/dist/css/iziToast.min.css';\n// DokÃ¼mantasyonda belirtilen import\n\nimport {\n  renderImages,\n  hideButton,\n  hideLoader,\n  showButton,\n  showLoader,\n  clearGallery,\n} from './js/render-functions.js';\nimport { fetchImages } from './js/pixabay-api.js';\n\nconst form = document.querySelector('.form');\n\nconst button = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\n\nlet page;\nlet searchQuery;\nconst per_page = 40;\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  page = 1;\n  clearGallery();\n\n  searchQuery = e.target.elements.search.value.trim();\n\n  if (searchQuery === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term',\n      position: 'topRight',\n    });\n    hideButton();\n    return;\n  }\n  hideButton();\n  showLoader();\n\n  try {\n    const images = await fetchImages(searchQuery, page, per_page);\n    if (images.hits.length === 0) {\n      iziToast.warning({\n        title: 'Warning',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      hideButton();\n      return;\n    }\n    renderImages(images.hits);\n\n    if (images.totalHits > images.hits.length) {\n      showButton();\n    }\n    const totalPages = Math.ceil(images.totalHits / per_page);\n\n    if (page >= totalPages) {\n      iziToast.warning({\n        title: 'Warning',\n        message: \"We're sorry, but you've reached the end of search results\",\n        position: 'topRight',\n      });\n      hideButton();\n      return;\n    }\n\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n\n  form.reset();\n});\n\nbutton.addEventListener('click', async () => {\n  page += 1;\n\n  showLoader();\n\n  try {\n    const images = await fetchImages(searchQuery, page, per_page);\n    if (images.hits.length === 0) {\n      iziToast.warning({\n        title: 'Warning',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      hideButton();\n      return;\n    }\n    hideButton();\n    renderImages(images.hits);\n\n    if (images.totalHits > images.hits.length) {\n      showButton();\n    }\n\n    const rect = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect();\n\n    window.scrollBy({\n      top: rect.height * 2,\n      behavior: 'smooth',\n    });\n\n    const totalPages = Math.ceil(images.totalHits / per_page);\n\n    if (page >= totalPages) {\n      iziToast.warning({\n        title: 'Warning',\n        message: \"We're sorry, but you've reached the end of search results\",\n        position: 'topRight',\n      });\n      hideButton();\n      return;\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["gallery","loader","button","lightbox","SimpleLightbox","renderImages","images","markup","image","clearGallery","showLoader","hideLoader","showButton","hideButton","api_key","fetchImages","input","page","per_page","axios","error","iziToast","form","searchQuery","e","totalPages","rect"],"mappings":"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"}